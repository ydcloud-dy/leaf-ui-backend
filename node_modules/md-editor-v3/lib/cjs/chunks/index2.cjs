"use strict";const e=require("vue"),i=require("./config.cjs"),x=require("./index5.cjs"),S=require("./dom.cjs"),C=require("./vue-tsx.cjs"),t=require("lucide-vue-next"),I=()=>e.createVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-github-icon"},[e.createVNode("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"},null),e.createVNode("path",{d:"M9 18c-4.51 2-5-2-7-2"},null)]),P={bold:t.Bold,underline:t.Underline,italic:t.Italic,"strike-through":t.Strikethrough,title:t.Heading,sub:t.Subscript,sup:t.Superscript,quote:t.Quote,"unordered-list":t.List,"ordered-list":t.ListOrdered,task:t.ListTodo,"code-row":t.Code,code:t.SquareCode,link:t.Link,image:t.Image,table:t.Table,revoke:t.Reply,next:t.Forward,save:t.Save,prettier:t.SquareCode,minimize:t.Minimize2,maximize:t.Maximize2,"fullscreen-exit":t.Shrink,fullscreen:t.Expand,"preview-only":t.View,preview:t.Eye,"preview-html":t.CodeXml,catalog:t.ListTree,github:I,mermaid:t.ChartArea,formula:t.SquareSigma,close:t.X,delete:t.Trash2,upload:t.Upload},$=e.defineComponent({name:`${i.prefix}-icon-set`,props:{name:{type:String,default:""}},setup(o){return()=>e.h(P[o.name],{class:`${i.prefix}-icon`})}}),g=e.defineComponent({name:`${i.prefix}-icon`,props:{name:{type:String,default:""}},setup(o){const d=e.inject("customIcon");return()=>{const r=d.value[o.name];return typeof r=="object"?typeof r.component=="object"?e.h(r.component,r.props):e.createVNode("span",{innerHTML:r.component},null):e.createVNode($,{name:o.name},null)}}}),T={title:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String,default:void 0},style:{type:[Object,String],default:()=>({})},showMask:{type:Boolean,default:!0}},m=e.defineComponent({name:"MdModal",props:T,emits:["onClose"],setup(o,d){const r=e.inject("theme"),k=e.inject("rootRef"),f=e.ref(o.visible),c=e.ref([`${i.prefix}-modal`]),h=e.ref(),v=e.ref(),p=e.ref(),b=e.shallowRef();let u=()=>{};const n=e.reactive({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),w=e.computed(()=>o.isFullscreen?{width:"100%",height:"100%"}:{width:o.width,height:o.height});e.watch(()=>o.isFullscreen,l=>{l?u():e.nextTick(()=>{u=S.keyMove(v.value,(a,s)=>{n.initPos.left=a+"px",n.initPos.top=s+"px"})})}),e.watch(()=>o.visible,l=>{l?(n.maskStyle.zIndex=i.globalConfig.editorConfig.zIndex+x.getZIndexIncrement(),n.modalStyle.zIndex=i.globalConfig.editorConfig.zIndex+x.getZIndexIncrement(),c.value.push("zoom-in"),f.value=l,e.nextTick(()=>{const a=h.value.offsetWidth/2,s=h.value.offsetHeight/2,M=document.documentElement.clientWidth/2,V=document.documentElement.clientHeight/2;n.initPos.left=M-a+"px",n.initPos.top=V-s+"px",o.isFullscreen||(u=S.keyMove(v.value,(j,z)=>{n.initPos.left=j+"px",n.initPos.top=z+"px"}))}),setTimeout(()=>{c.value=c.value.filter(a=>a!=="zoom-in")},140)):(c.value.push("zoom-out"),u(),setTimeout(()=>{c.value=c.value.filter(a=>a!=="zoom-out"),f.value=l},130))});const y=e.computed(()=>({display:f.value?"block":"none"})),N=e.computed(()=>{if(typeof o.style=="string"){const l=Object.entries(y.value).map(([a,s])=>`${a}: ${s}`).join("; ");return[o.style,l].join("; ")}else return o.style instanceof Object?{...y.value,...o.style}:y.value});return e.onMounted(()=>{const l=k.value?.getRootNode();p.value=l instanceof Document?document.body:l}),()=>{const l=C.getSlot({ctx:d}),a=C.getSlot({props:o,ctx:d},"title");return p.value?e.createVNode(e.Teleport,{to:p.value},{default:()=>[e.createVNode("div",{ref:b,class:`${i.prefix}-modal-container`,"data-theme":r.value},[e.createVNode("div",{class:o.class,style:N.value},[o.showMask&&e.createVNode("div",{class:`${i.prefix}-modal-mask`,style:n.maskStyle,onClick:()=>{o.onClose?.(),d.emit("onClose")}},null),e.createVNode("div",{class:c.value,style:{...n.modalStyle,...n.initPos,...w.value},ref:h},[e.createVNode("div",{class:`${i.prefix}-modal-header`,ref:v},[a||""]),e.createVNode("div",{class:`${i.prefix}-modal-body`},[l]),e.createVNode("div",{class:`${i.prefix}-modal-func`},[o.showAdjust&&e.createVNode("div",{class:`${i.prefix}-modal-adjust`,onClick:s=>{s.stopPropagation(),o.isFullscreen?n.initPos=n.historyPos:(n.historyPos=n.initPos,n.initPos={left:"0",top:"0"}),o.onAdjust(!o.isFullscreen)}},[e.createVNode(g,{name:o.isFullscreen?"minimize":"maximize"},null)]),e.createVNode("div",{class:`${i.prefix}-modal-close`,onClick:s=>{s.stopPropagation(),o.onClose?.(),d.emit("onClose")}},[e.createVNode(g,{name:"close"},null)])])])])])]}):""}}});m.install=o=>(o.component(m.name,m),o);exports.Icon=g;exports.MdModal=m;
